<!DOCTYPE html>
<html>
    <head>
        <title>图片预览组件</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link type="text/css" rel="stylesheet" href="../style/avalon.doc.css">
        <script src="../avalon.js">

        </script>
        <script src="../highlight/shCore.js">

        </script>
        <script>
            require(["preview/avalon.preview","ready!"], function() {

                avalon.define("test", function(vm) {
                    vm.preview = {
                        fileInput: document.getElementById("file"),
                        onInit: function(vmodel, options, vmodels) {
                           avalon.bind(options.fileInput, "change", function() {
                                try{
                                    parent && parent.setHeight && parent.setHeight()
                                }catch(e) {}
                            })
                        }
                    }
                    vm.$skipArray = ["preview"]
                })
                avalon.scan()
            })
        </script>
    </head>
    <body ms-controller="test">
        <form>
            <p><input type="file" id="file" multiple=""/>可预览多个</p>
            <div ms-widget="preview"></div>
        </form>
        <div ms-skip>
            <pre class="brush: js; html-script: true; gutter: false; toolbar: false">
                &lt;!DOCTYPE HTML&gt;
                &lt;html&gt;
                &lt;head&gt;
                    &lt;meta charset='utf-8'/&gt;
                    &lt;title&gt;图片预览组件&lt;/title&gt;
                    &lt;script src='avalon.js'&gt;&lt;/script&gt;
                &lt;/head&gt;
                &lt;body ms-controller="test" &gt;
                    &lt;form&gt;
                        &lt;p&gt;&lt;input type="file" id="file" multiple=""/&gt;可预览多个&lt;/p&gt;
                        &lt;div ms-widget="preview"&gt;&lt;/div&gt;
                    &lt;/form&gt;
                    &lt;script&gt;
                        require(["preview/avalon.preview","ready!"], function() {
                            avalon.define("test", function(vm) {
                                vm.preview = {
                                    fileInput: document.getElementById("file"),
                                    onInit: function(vmodel, options, vmodels) {
                                       avalon.bind(options.fileInput, "change", function() {
                                            try{
                                                parent && parent.setHeight && parent.setHeight()
                                            }catch(e) {}
                                        })
                                    }
                                }
                                vm.$skipArray = ["preview"]
                            })
                            avalon.scan()
                        })
                    &lt;/script&gt;
                &lt;/body&gt;
                &lt;/html&gt;
            </pre>
        </div>

    </body>
</html>
